<!DOCTYPE html>
<html lang="en">
<head>
Â  <meta charset="UTF-8" />
Â  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
Â  <title>Login | Loan Calculator</title>
Â  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet" />
Â  <link rel="stylesheet" href="style.css" />
</head>
<body>
Â  <div class="container">
Â  Â  <h1>Welcome Back ğŸ‘‹</h1>
Â  Â  <p class="subtitle">Login or Signup to continue</p>

Â  Â  <div class="form">
Â  Â  Â  <label>Name</label>
Â  Â  Â  <input type="text" id="name" placeholder="Enter your name" />

Â  Â  Â  <label>Email</label>
Â  Â  Â  <input type="email" id="email" placeholder="Enter your email" />

Â  Â  Â  <button onclick="signup()">Signup</button>
Â  Â  Â  <button onclick="login()" class="secondary">Login</button>
Â  Â  </div>
Â  Â  <p id="msg" style="margin-top:10px;"></p>
Â  </div>

Â  Â  <script src="config.js"></script>

Â  <script>
Â  Â  async function signup() {
Â  Â  Â  const name = document.getElementById("name").value.trim();
Â  Â  Â  const email = document.getElementById("email").value.trim();

Â  Â  Â  if (!name || !email) {
Â  Â  Â  Â  document.getElementById("msg").innerText = "âš ï¸ Please fill all fields.";
Â  Â  Â  Â  return;
Â  Â  Â  }

Â  Â  Â  try {
Â  Â  Â  Â  const res = await fetch(`${BASE_URL}/signup`, {
Â  Â  Â  Â  Â  method: "POST",
Â  Â  Â  Â  Â  headers: { "Content-Type": "application/json" },
Â  Â  Â  Â  Â  body: JSON.stringify({ name, email }),
Â  Â  Â  Â  });
Â  Â  Â  Â  const data = await res.json();

Â  Â  Â  Â  if (data.user) {
Â  Â  Â  Â  Â  localStorage.setItem("user", JSON.stringify(data.user));
Â  Â  Â  Â  Â  // â­ FIX: Changed redirect to absolute path for deployment reliability
Â  Â  Â  Â  Â  window.location.href = "/index.html"; 
Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  document.getElementById("msg").innerText = data.error || data.message;
Â  Â  Â  Â  }
Â  Â  Â  } catch (err) {
Â  Â  Â  Â  document.getElementById("msg").innerText = "âŒ Server not reachable.";
Â  Â  Â  }
Â  Â  }

Â  Â  async function login() {
Â  Â  Â  const email = document.getElementById("email").value.trim();

Â  Â  Â  if (!email) {
Â  Â  Â  Â  document.getElementById("msg").innerText = "âš ï¸ Enter your email.";
Â  Â  Â  Â  return;
Â  Â  Â  }

Â  Â  Â  try {
Â  Â  Â  Â  const res = await fetch(`${BASE_URL}/login`, {
Â  Â  Â  Â  Â  method: "POST",
Â  Â  Â  Â  Â  headers: { "Content-Type": "application/json" },
Â  Â  Â  Â  Â  body: JSON.stringify({ email }),
Â  Â  Â  Â  });
Â  Â  Â  Â  const data = await res.json();

Â  Â  Â  Â  if (data.user) {
Â  Â  Â  Â  Â  localStorage.setItem("user", JSON.stringify(data.user));
Â  Â  Â  Â  Â  // â­ FIX: Changed redirect to absolute path for deployment reliability
Â  Â  Â  Â  Â  window.location.href = "/index.html";
Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  document.getElementById("msg").innerText = data.error || data.message;
Â  Â  Â  Â  }
Â  Â  Â  } catch (err) {
Â  Â  Â  Â  document.getElementById("msg").innerText = "âŒ Server not reachable.";
Â  Â  Â  }
Â  Â  }
Â  </script>
</body>
</html>